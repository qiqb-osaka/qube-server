version: "3.8"

services:
  labrad:
    build:
      context: .
    volumes:
      - ./.labrad:/root/.labrad
      #- ./lib:/root/lib
      - ~/work:/root/lib
      #- ../QubeServer.py:/root/lib/QubeServer.py
      - ../qubesrv:/root/lib/qubesrv
      - ./config:/root/config
      - ./script:/root/script
      - ./log:/root/log
      - ./work:/root/work
    network_mode: "host"
    environment:
      - LABRADPORT=7682

  jupyter:
    image: qiqb/qiqb-docker-jupyter:latest
    volumes:
      - ./notebooks:/home/jovyan/notebooks
      #- ../:/jupyter/lib
      - ~/work:/jupyter/lib
    network_mode: "host"
    command: jupyter lab --port=8888
